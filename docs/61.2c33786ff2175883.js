"use strict";(self.webpackChunkecommerce=self.webpackChunkecommerce||[]).push([[61],{5061:(U,h,a)=>{a.r(h),a.d(h,{CartModule:()=>L});var m=a(6895),C=a(5258),n=a(9653);const f=(0,n.PH)("[Cart] Get Cart"),l=(0,n.PH)("[Cart] Get Cart Success",(0,n.Ky)()),g=(0,n.PH)("[Cart] Remove Item",(0,n.Ky)()),v=(0,n.PH)("[Cart] Reset Cart"),I=(0,n.ZF)("cart"),M=(0,n.P1)(I,e=>e);var t=a(4650),i=a(3546);function B(e,o){if(1&e){const r=t.EpF();t.TgZ(0,"mat-card",4)(1,"mat-card-title-group")(2,"mat-card-title"),t._uU(3),t.qZA(),t.TgZ(4,"mat-card-subtitle"),t._uU(5),t.qZA()(),t.TgZ(6,"mat-card-content"),t._uU(7),t.TgZ(8,"span",5),t._uU(9),t.ALo(10,"currency"),t.qZA()(),t.TgZ(11,"button",6),t.NdJ("click",function(){const p=t.CHM(r).$implicit,c=t.oxw();return t.KtG(c.removeItem(p.id))}),t._uU(12,"Remove"),t.qZA()()}if(2&e){const r=o.$implicit;t.xp6(3),t.Oqu(r.name),t.xp6(2),t.Oqu(r.description),t.xp6(2),t.hij(" Order number: ",r.order_id," "),t.xp6(2),t.hij("Price: ",t.lcZ(10,4,r.price),"")}}const G=[{path:"",component:(()=>{class e{constructor(r){this.store=r}ngOnInit(){this.store.dispatch(f()),this.store.select(M).subscribe(r=>{this.cart=r})}removeItem(r){this.store.dispatch(g({item:{data:{items:[{id:r,_destroy:!0}]}}}))}}return e.\u0275fac=function(r){return new(r||e)(t.Y36(n.yh))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-cart"]],decls:5,vars:1,consts:[[1,"cards-header"],[2,"margin-bottom","2rem"],[1,"cards-container"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[2,"font-weight","bold"],[3,"click"]],template:function(r,s){1&r&&(t.TgZ(0,"div",0)(1,"h3",1),t._uU(2,"Cart Page:"),t.qZA()(),t.TgZ(3,"div",2),t.YNc(4,B,13,6,"mat-card",3),t.qZA()),2&r&&(t.xp6(4),t.Q6J("ngForOf",s.cart.data.items))},dependencies:[m.sg,i.a8,i.C1,i.dn,i.n5,i.$j,m.H9],styles:[".cards-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px}.cards-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{max-width:250px;margin-bottom:8px;box-shadow:0 0 5px #5f30e2}"]}),e})()}];let T=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[C.Bz.forChild(G),C.Bz]}),e})();var d=a(493),P=a(2340),$=a(529),z=a(8345);let y=(()=>{class e{constructor(r,s){this.http=r,this.localStorage=s,this.url=P.N.url}getCart(){return this.http.get(`${this.url}/cart`,{headers:{Authorization:`Bearer ${this.localStorage.getItem("token")}`}})}removeItem(r){return this.http.put(`${this.url}/cart`,r,{headers:{Authorization:`Bearer ${this.localStorage.getItem("token")}`}})}}return e.\u0275fac=function(r){return new(r||e)(t.LFG($.eN),t.LFG(z.n))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();var x=a(5577),F=a(4004),S=a(262),E=a(8010);let O=(()=>{class e{constructor(r,s,A,p){this.actions$=r,this.cartService=s,this.snackBar=A,this.store=p,this.cartEffect=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(f),(0,x.z)(()=>this.cartService.getCart().pipe((0,F.U)(c=>l({cart:c})),(0,S.K)(c=>{throw this.snackBar.open(404===c.status?"Empty Cart":c.statusText,"Retry",{duration:3e3}),c}))))),this.removeItemEffect=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(g),(0,x.z)(c=>this.cartService.removeItem(c.item).pipe((0,F.U)(u=>(this.snackBar.open("Item removed successfully","Close",{duration:3e3}),l({cart:u}))),(0,S.K)(u=>{throw 422===u.status&&(this.store.dispatch(v()),this.snackBar.open("Cart is Empty","Close",{duration:3e3})),u})))))}}return e.\u0275fac=function(r){return new(r||e)(t.LFG(d.eX),t.LFG(y),t.LFG(E.ux),t.LFG(n.yh))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();const Z={data:{id:void 0,user_id:void 0,number:void 0,status:void 0,total:void 0,total_items:void 0,completed_at:void 0,created_at:void 0,items:[]}},R=(0,n.Lq)(Z,(0,n.on)(l,(e,o)=>o.cart),(0,n.on)(v,()=>Z));let L=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[y],imports:[m.ez,T,i.QW,n.Aw.forFeature("cart",R),d.sQ.forFeature([O])]}),e})()}}]);